# Firestore ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«å®Ÿè£…ã‚¬ã‚¤ãƒ‰

## ğŸ“‹ ç›®æ¬¡

1. [æ¦‚è¦](#æ¦‚è¦)
2. [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã®æ§‹é€ ](#ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã®æ§‹é€ )
3. [ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ¬ãƒ¼ãƒ ã®è¨­å®š](#ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ¬ãƒ¼ãƒ ã®è¨­å®š)
4. [ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã®è©³ç´°](#ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã®è©³ç´°)
5. [å®Ÿè£…æ‰‹é †](#å®Ÿè£…æ‰‹é †)
6. [ãƒ†ã‚¹ãƒˆæ–¹æ³•](#ãƒ†ã‚¹ãƒˆæ–¹æ³•)
7. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

---

## ğŸ“Œ æ¦‚è¦

ã“ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã¯ã€ä»¥ä¸‹ã®è¦ä»¶ã‚’æº€ãŸã™ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ï¼š

### âœ… ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶

| è¦ä»¶ | å®Ÿè£…çŠ¶æ³ |
|------|---------|
| èªè¨¼æ¸ˆã¿åŒ»ç™‚ã‚¹ã‚¿ãƒƒãƒ•ã®ã¿ãŒæ‚£è€…ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿æ›¸ã | âœ… å®Ÿè£…æ¸ˆã¿ |
| æ‚£è€…ã¯è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿é–²è¦§å¯èƒ½ | âœ… å®Ÿè£…æ¸ˆã¿ |
| æœªèªè¨¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ä¸€åˆ‡ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯ | âœ… å®Ÿè£…æ¸ˆã¿ |
| å€‹äººæƒ…å ±ä¿è­·æ³•ã«æº–æ‹ ã—ãŸã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ | âœ… å®Ÿè£…æ¸ˆã¿ |
| ç›£æŸ»ãƒ­ã‚°ã®æ”¹ã–ã‚“é˜²æ­¢ | âœ… å®Ÿè£…æ¸ˆã¿ |
| ãƒ‡ãƒ¼ã‚¿å‰Šé™¤ã®åˆ¶é™ï¼ˆç®¡ç†è€…ã®ã¿ï¼‰ | âœ… å®Ÿè£…æ¸ˆã¿ |

---

## ğŸ—ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã®æ§‹é€ 

### éšå±¤æ§‹é€ 

```
/facilities/{facilityId}
â”œâ”€â”€ questionnaires/{questionnaireId}    # å•è¨ºç¥¨
â”œâ”€â”€ responses/{responseId}              # æ‚£è€…å›ç­”
â”œâ”€â”€ config/patient_basic_info           # æ‚£è€…åŸºæœ¬æƒ…å ±è¨­å®š
â””â”€â”€ audit_logs/{logId}                  # ç›£æŸ»ãƒ­ã‚°

/users/{userId}                         # ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«
```

### ãƒ­ãƒ¼ãƒ«å®šç¾©

| ãƒ­ãƒ¼ãƒ« | æ¨©é™ | ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ¬ãƒ¼ãƒ  |
|--------|------|-----------------|
| **admin** | å…¨æ¨©é™ï¼ˆå‰Šé™¤ã‚‚å¯èƒ½ï¼‰ | `{ role: 'admin', facilityId: '...' }` |
| **medical_staff** | èª­ã¿æ›¸ãï¼ˆå‰Šé™¤ã¯ä¸å¯ï¼‰ | `{ role: 'medical_staff', facilityId: '...' }` |
| **patient** | è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿é–²è¦§ | `{ role: 'patient', patientId: '...', dateOfBirth: '...' }` |

---

## ğŸ”‘ ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ¬ãƒ¼ãƒ ã®è¨­å®š

### å‰ææ¡ä»¶

ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ¬ãƒ¼ãƒ ã¯ **Firebase Admin SDK** ã‚’ä½¿ç”¨ã—ã¦ã‚µãƒ¼ãƒãƒ¼å´ã§è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

### è¨­å®šæ–¹æ³•

#### æ–¹æ³•1: Cloud Functionsï¼ˆæ¨å¥¨ï¼‰

```javascript
const functions = require('firebase-functions');
const admin = require('firebase-admin');
admin.initializeApp();

// ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆæ™‚ã«è‡ªå‹•ã§ã‚¯ãƒ¬ãƒ¼ãƒ ã‚’è¨­å®š
exports.setUserClaims = functions.firestore
  .document('users/{userId}')
  .onCreate(async (snap, context) => {
    const userData = snap.data();
    const userId = context.params.userId;

    // ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ¬ãƒ¼ãƒ ã‚’è¨­å®š
    await admin.auth().setCustomUserClaims(userId, {
      role: userData.role,
      facilityId: userData.facilityId,
      patientId: userData.patientId || null,
      dateOfBirth: userData.dateOfBirth || null,
    });

    console.log(`âœ… ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ¬ãƒ¼ãƒ è¨­å®šå®Œäº†: ${userId}`);
  });
```

#### æ–¹æ³•2: ç®¡ç†ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

`firebase_custom_claims.js` ã‚’ä½¿ç”¨ï¼š

```bash
# Node.jsç’°å¢ƒã§å®Ÿè¡Œ
node firebase_custom_claims.js
```

```javascript
const { setMedicalStaffClaims, setPatientClaims } = require('./firebase_custom_claims');

// åŒ»ç™‚ã‚¹ã‚¿ãƒƒãƒ•ã®ã‚¯ãƒ¬ãƒ¼ãƒ è¨­å®š
await setMedicalStaffClaims('user_uid', 'facility_001', 'medical_staff');

// æ‚£è€…ã®ã‚¯ãƒ¬ãƒ¼ãƒ è¨­å®š
await setPatientClaims('user_uid', 'facility_001', 'P00123', '1990-01-15');
```

---

## ğŸ” ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã®è©³ç´°

### 1. æ–½è¨­ãƒ‡ãƒ¼ã‚¿ (Facilities)

#### èª­ã¿å–ã‚Š
```
æ¡ä»¶: èªè¨¼æ¸ˆã¿ AND æ‰€å±æ–½è¨­ãŒä¸€è‡´
ä¾‹: åŒ»ç™‚ã‚¹ã‚¿ãƒƒãƒ•ã¯è‡ªåˆ†ã®æ–½è¨­ã®ã¿é–²è¦§å¯èƒ½
```

#### ä½œæˆ
```
æ¡ä»¶: ç®¡ç†è€…ãƒ­ãƒ¼ãƒ«
ä¾‹: æ–°ã—ã„æ–½è¨­ã¯ç®¡ç†è€…ã®ã¿ãŒä½œæˆå¯èƒ½
```

#### æ›´æ–°
```
æ¡ä»¶: ç®¡ç†è€…ãƒ­ãƒ¼ãƒ« AND æ‰€å±æ–½è¨­ãŒä¸€è‡´
ä¾‹: æ–½è¨­æƒ…å ±ã®ç·¨é›†ã¯æ‰€å±æ–½è¨­ã®ç®¡ç†è€…ã®ã¿
```

#### å‰Šé™¤
```
æ¡ä»¶: ä¸å¯
ç†ç”±: ãƒ‡ãƒ¼ã‚¿ä¿è­·ã®ãŸã‚å‰Šé™¤ã¯ç¦æ­¢
```

---

### 2. å•è¨ºç¥¨ (Questionnaires)

#### èª­ã¿å–ã‚Š
```
æ¡ä»¶: èªè¨¼æ¸ˆã¿ AND æ‰€å±æ–½è¨­ãŒä¸€è‡´
ä¾‹: åŒ»ç™‚ã‚¹ã‚¿ãƒƒãƒ•ã¨æ‚£è€…ã¯è‡ªæ–½è¨­ã®å•è¨ºç¥¨ã‚’é–²è¦§å¯èƒ½
```

#### ä½œæˆãƒ»æ›´æ–°
```
æ¡ä»¶: (åŒ»ç™‚ã‚¹ã‚¿ãƒƒãƒ• OR ç®¡ç†è€…) AND æ‰€å±æ–½è¨­ãŒä¸€è‡´
ä¾‹: å•è¨ºç¥¨ã®ä½œæˆãƒ»ç·¨é›†ã¯åŒ»ç™‚ã‚¹ã‚¿ãƒƒãƒ•ã¨ç®¡ç†è€…ã®ã¿
```

#### å‰Šé™¤
```
æ¡ä»¶: ç®¡ç†è€… AND æ‰€å±æ–½è¨­ãŒä¸€è‡´
ä¾‹: å•è¨ºç¥¨ã®å‰Šé™¤ã¯ç®¡ç†è€…ã®ã¿
```

---

### 3. æ‚£è€…å›ç­” (Patient Responses)

#### èª­ã¿å–ã‚Š
```
æ¡ä»¶1: åŒ»ç™‚ã‚¹ã‚¿ãƒƒãƒ• AND æ‰€å±æ–½è¨­ãŒä¸€è‡´
æ¡ä»¶2: æ‚£è€…æœ¬äººï¼ˆpatientId AND dateOfBirth ãŒä¸€è‡´ï¼‰

ä¾‹: åŒ»ç™‚ã‚¹ã‚¿ãƒƒãƒ•ã¯å…¨æ‚£è€…ãƒ‡ãƒ¼ã‚¿ã‚’é–²è¦§å¯èƒ½
    æ‚£è€…ã¯è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿é–²è¦§å¯èƒ½
```

#### ä½œæˆ
```
æ¡ä»¶1: åŒ»ç™‚ã‚¹ã‚¿ãƒƒãƒ• AND æ‰€å±æ–½è¨­ãŒä¸€è‡´
æ¡ä»¶2: æ‚£è€…æœ¬äººï¼ˆè‡ªåˆ†ã®patientIdã¨dateOfBirthã®ã¿ï¼‰

ä¾‹: åŒ»ç™‚ã‚¹ã‚¿ãƒƒãƒ•ã¯ä»»æ„ã®æ‚£è€…ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆå¯èƒ½
    æ‚£è€…ã¯è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿ä½œæˆå¯èƒ½
```

#### æ›´æ–°
```
æ¡ä»¶: åŒ»ç™‚ã‚¹ã‚¿ãƒƒãƒ• AND æ‰€å±æ–½è¨­ãŒä¸€è‡´
ä¾‹: ãƒ‡ãƒ¼ã‚¿ä¿®æ­£ã¯åŒ»ç™‚ã‚¹ã‚¿ãƒƒãƒ•ã®ã¿ãŒè¡Œã†
```

#### å‰Šé™¤
```
æ¡ä»¶: ç®¡ç†è€… AND æ‰€å±æ–½è¨­ãŒä¸€è‡´
ä¾‹: ãƒ‡ãƒ¼ã‚¿å‰Šé™¤ã¯ç®¡ç†è€…ã®ã¿ï¼ˆæ…é‡ã«é‹ç”¨ï¼‰
```

---

### 4. ç›£æŸ»ãƒ­ã‚° (Audit Logs)

#### èª­ã¿å–ã‚Š
```
æ¡ä»¶: ç®¡ç†è€… AND æ‰€å±æ–½è¨­ãŒä¸€è‡´
ä¾‹: ç›£æŸ»ãƒ­ã‚°ã¯ç®¡ç†è€…ã®ã¿ãŒé–²è¦§å¯èƒ½
```

#### ä½œæˆ
```
æ¡ä»¶: èªè¨¼æ¸ˆã¿
ä¾‹: ã‚·ã‚¹ãƒ†ãƒ ãŒè‡ªå‹•çš„ã«ãƒ­ã‚°ã‚’ç”Ÿæˆ
```

#### æ›´æ–°ãƒ»å‰Šé™¤
```
æ¡ä»¶: ä¸å¯
ç†ç”±: æ”¹ã–ã‚“é˜²æ­¢ã®ãŸã‚å¤‰æ›´ãƒ»å‰Šé™¤ã¯ç¦æ­¢
```

---

## ğŸš€ å®Ÿè£…æ‰‹é †

### ã‚¹ãƒ†ãƒƒãƒ—1: Firebaseã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã‚’è¨­å®š

1. **Firebase Console** ã«ã‚¢ã‚¯ã‚»ã‚¹
   - https://console.firebase.google.com/

2. **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é¸æŠ** â†’ **Firestore Database**

3. **ãƒ«ãƒ¼ãƒ«** ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯

4. `firestore.rules` ã®å†…å®¹ã‚’ã‚³ãƒ”ãƒ¼ï¼†ãƒšãƒ¼ã‚¹ãƒˆ

5. **å…¬é–‹** ã‚’ã‚¯ãƒªãƒƒã‚¯

### ã‚¹ãƒ†ãƒƒãƒ—2: ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ¬ãƒ¼ãƒ ã®è¨­å®š

#### Cloud Functionsã‚’ä½¿ç”¨ã™ã‚‹å ´åˆ

```bash
# 1. Firebase CLIã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g firebase-tools

# 2. ãƒ­ã‚°ã‚¤ãƒ³
firebase login

# 3. Functionsã‚’åˆæœŸåŒ–
firebase init functions

# 4. functions/index.js ã«ã‚¯ãƒ¬ãƒ¼ãƒ è¨­å®šé–¢æ•°ã‚’è¿½åŠ 

# 5. ãƒ‡ãƒ—ãƒ­ã‚¤
firebase deploy --only functions
```

#### ç®¡ç†ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½¿ç”¨ã™ã‚‹å ´åˆ

```bash
# 1. firebase-admin-sdk.json ã‚’é…ç½®

# 2. ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œ
node firebase_custom_claims.js
```

### ã‚¹ãƒ†ãƒƒãƒ—3: Flutter ã‚¢ãƒ—ãƒªã«èªè¨¼ã‚µãƒ¼ãƒ“ã‚¹ã‚’çµ±åˆ

```dart
// main.dart ã«è¿½åŠ 
import 'services/medical_auth_service.dart';

final authService = MedicalAuthService();

// ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†
await authService.signInWithEmailAndPassword(
  email: email,
  password: password,
);

// ãƒ­ãƒ¼ãƒ«ç¢ºèª
if (await authService.isMedicalStaff()) {
  // åŒ»ç™‚ã‚¹ã‚¿ãƒƒãƒ•ç”¨ç”»é¢ã¸é·ç§»
} else if (await authService.isPatient()) {
  // æ‚£è€…ç”¨ç”»é¢ã¸é·ç§»
}
```

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆæ–¹æ³•

### 1. Firebaseã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã®ãƒ†ã‚¹ãƒˆ

1. **Firebase Console** â†’ **Firestore Database** â†’ **ãƒ«ãƒ¼ãƒ«**

2. **ãƒ«ãƒ¼ãƒ« ãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰** ã‚’ã‚¯ãƒªãƒƒã‚¯

3. ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’å…¥åŠ›ï¼š

```javascript
// ãƒ†ã‚¹ãƒˆ1: åŒ»ç™‚ã‚¹ã‚¿ãƒƒãƒ•ãŒæ‚£è€…ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿å–ã‚‹
get /facilities/facility_001/responses/response_001

// èªè¨¼æƒ…å ±
auth.uid = "staff_uid_12345"
auth.token = {
  role: "medical_staff",
  facilityId: "facility_001"
}

// æœŸå¾…çµæœ: âœ… è¨±å¯
```

```javascript
// ãƒ†ã‚¹ãƒˆ2: æ‚£è€…ãŒè‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿å–ã‚‹
get /facilities/facility_001/responses/response_001

// èªè¨¼æƒ…å ±
auth.uid = "patient_uid_11111"
auth.token = {
  role: "patient",
  patientId: "P00123",
  dateOfBirth: "1990-01-15"
}

// æœŸå¾…çµæœ: âœ… è¨±å¯ï¼ˆãƒ‡ãƒ¼ã‚¿ãŒæ‚£è€…æœ¬äººã®ã‚‚ã®ã§ã‚ã‚‹å ´åˆï¼‰
```

```javascript
// ãƒ†ã‚¹ãƒˆ3: æœªèªè¨¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿å–ã‚‹
get /facilities/facility_001/responses/response_001

// èªè¨¼æƒ…å ±
auth = null

// æœŸå¾…çµæœ: âŒ æ‹’å¦
```

### 2. Flutter ã‚¢ãƒ—ãƒªã§ã®ãƒ†ã‚¹ãƒˆ

```dart
void testSecurity() async {
  final authService = MedicalAuthService();
  
  // ãƒ†ã‚¹ãƒˆ1: åŒ»ç™‚ã‚¹ã‚¿ãƒƒãƒ•ã§ãƒ­ã‚°ã‚¤ãƒ³
  await authService.signInWithEmailAndPassword(
    email: 'staff@test.com',
    password: 'password',
  );
  
  // æ‚£è€…ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿å–ã‚Šã‚’è©¦è¡Œ
  try {
    final snapshot = await FirebaseFirestore.instance
        .collection('facilities/facility_001/responses')
        .doc('response_001')
        .get();
    print('âœ… ã‚¢ã‚¯ã‚»ã‚¹æˆåŠŸ');
  } catch (e) {
    print('âŒ ã‚¢ã‚¯ã‚»ã‚¹æ‹’å¦: $e');
  }
}
```

---

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡Œ1: "Permission denied" ã‚¨ãƒ©ãƒ¼

**åŸå› **: ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ¬ãƒ¼ãƒ ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„

**è§£æ±ºç­–**:
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ¬ãƒ¼ãƒ ã‚’ç¢ºèª
```dart
final claims = await authService.getUserClaims();
print('Claims: $claims');
```

2. ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ¬ãƒ¼ãƒ ã‚’å†è¨­å®š
```javascript
await setMedicalStaffClaims(uid, facilityId, 'medical_staff');
```

3. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å†ãƒ­ã‚°ã‚¤ãƒ³ï¼ˆãƒˆãƒ¼ã‚¯ãƒ³æ›´æ–°ã®ãŸã‚ï¼‰

---

### å•é¡Œ2: ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ¬ãƒ¼ãƒ ãŒåæ˜ ã•ã‚Œãªã„

**åŸå› **: ãƒˆãƒ¼ã‚¯ãƒ³ãŒã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¦ã„ã‚‹

**è§£æ±ºç­–**:
```dart
// ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å¼·åˆ¶æ›´æ–°
final user = FirebaseAuth.instance.currentUser;
await user?.getIdToken(true);

// ã¾ãŸã¯å†ãƒ­ã‚°ã‚¤ãƒ³
await authService.signOut();
await authService.signInWithEmailAndPassword(email, password);
```

---

### å•é¡Œ3: ãƒ«ãƒ¼ãƒ«ãŒè¤‡é›‘ã™ãã¦ãƒ‡ãƒãƒƒã‚°ãŒå›°é›£

**è§£æ±ºç­–**:
1. **Firebase Console** ã® **ãƒ«ãƒ¼ãƒ« ãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰** ã‚’ä½¿ç”¨
2. ãƒ­ã‚°ã‚’è¿½åŠ ã—ã¦ãƒ‡ãƒãƒƒã‚°ï¼ˆæœ¬ç•ªã§ã¯å‰Šé™¤ï¼‰
```javascript
// ãƒ‡ãƒãƒƒã‚°ç”¨ãƒ­ã‚°ï¼ˆé–‹ç™ºæ™‚ã®ã¿ï¼‰
allow read: if debug(request.auth.token.role) == 'medical_staff';

function debug(value) {
  return value;
}
```

---

## ğŸ“š å‚è€ƒè³‡æ–™

- [Firebase Security Rules å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://firebase.google.com/docs/firestore/security/get-started)
- [ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ¬ãƒ¼ãƒ  ã‚¬ã‚¤ãƒ‰](https://firebase.google.com/docs/auth/admin/custom-claims)
- [åŒ»ç™‚ãƒ‡ãƒ¼ã‚¿ã® HIPAA ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹](https://firebase.google.com/support/privacy)

---

## âœ… ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] `firestore.rules` ã‚’Firebaseã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ãƒ‡ãƒ—ãƒ­ã‚¤
- [ ] ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ¬ãƒ¼ãƒ è¨­å®šé–¢æ•°ã‚’å®Ÿè£…
- [ ] åŒ»ç™‚ã‚¹ã‚¿ãƒƒãƒ•ã«ãƒ­ãƒ¼ãƒ«ã‚’ä»˜ä¸
- [ ] æ‚£è€…ã«ãƒ­ãƒ¼ãƒ«ã‚’ä»˜ä¸
- [ ] Firebase Console ã§ãƒ«ãƒ¼ãƒ«ã‚’ãƒ†ã‚¹ãƒˆ
- [ ] Flutter ã‚¢ãƒ—ãƒªã§ã‚¢ã‚¯ã‚»ã‚¹ãƒ†ã‚¹ãƒˆ
- [ ] ç›£æŸ»ãƒ­ã‚°ã®å‹•ä½œç¢ºèª
- [ ] æœ¬ç•ªç’°å¢ƒã«ãƒ‡ãƒ—ãƒ­ã‚¤

---

**ä½œæˆæ—¥**: 2026-01-20  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0  
**ãƒ©ã‚¤ã‚»ãƒ³ã‚¹**: Proprietary
